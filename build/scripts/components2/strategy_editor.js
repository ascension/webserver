define(["lib/react","../engine-controller","../strategies/strategies","../lib/lodash","../lib/clib"],function(e,t,n,r,i){var s=e.DOM;return e.createClass({displayName:"strategyEditor",getInitialState:function(){return{active:!1,script:n.custom}},propTypes:{engine:e.PropTypes.object.isRequired},runStrategy:function(){this.engineController=new t(this.props.engine,this.state.script,this.stopStrategy),this.setState({active:!0})},stopStrategy:function(){this.engineController.stop(),this.isMounted()&&this.setState({active:!1})},updateScript:function(){var e=this.refs.input.getDOMNode().value;this.setState({script:e})},selectStrategy:function(){var e=this.refs.strategies.getDOMNode().value;this.setState({script:n[e]})},render:function(){var e=this,t=r.map(n,function(e,t){return s.option({value:t,key:"strategy_"+t},i.capitaliseFirstLetter(t))});return s.div({className:"strategy-container"},s.textarea({className:"strategy-input",ref:"input",value:e.state.script,onChange:e.updateScript,disabled:this.state.active}),s.button({className:"strategy-start",onClick:e.runStrategy,disabled:this.state.active},"RUN!"),s.button({className:"strategy-stop",onClick:e.stopStrategy,disabled:!this.state.active},"STOP"),s.select({className:"strategy-select",onChange:e.selectStrategy,ref:"strategies",disabled:this.state.active},t))}})});